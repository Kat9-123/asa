#sublib/Stack
#sublib


Routine::return_stack -> !Stack::Create 32

@Routine::Def name? s_body? [
    name? -> s_body?
    !Routine::Return
]


@Routine::Call name? {
    !Stack::Push Routine::return_stack .return_address

    !J name?

    .return_address -> $1
}


@Routine::Return {
    !Stack::Pop Routine::return_stack return_addr

    W -= W (return_addr -> 0x0000)
}
