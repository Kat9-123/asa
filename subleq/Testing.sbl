!J .main
#Sublib




.main ->




    !Not x
    !Debug x ; -24937
    !Not y
    !Debug y ; 1236

    !And a b
    !Debug a ; 8201

    !Halt



    x -> 24936
    y -> -1237

    a -> 8399
    b -> -487

@LShift1 a? [
    !Add a? a?
]

@Not a? {
    !J .repeat
    result -> 0

    .repeat ->
        !LShift1 result

        !JumpIf::LeZero a? .msb_is_1
; .msb_is_0 ->
        !Inc result

        ; msb_is_1
        .msb_is_1 ->
        !LShift1 a?
        !Repeat 0 16 .repeat
    !Copy result a?
}


; a? &= b?
@And a? b? {
    !J .repeat
    result -> 0

    .repeat ->

        !LShift1 result
        !JumpIf::LeZero a? .msb_a_is_1

        !J .continue

        .msb_a_is_1 ->
        !JumpIf::LeZero b? .msb_a_b_is_1
        !J .continue
        .msb_a_b_is_1 ->

        !Inc result

        .continue ->
            !LShift1 a?
            !LShift1 b?
            !Repeat 0 16 .repeat
    !Cpy result a?
}

